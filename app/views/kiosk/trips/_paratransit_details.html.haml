.row-fluid
  - unless itinerary.cost_comments.blank?
    %h4 =translate_helper_translate(:cost_details)
    = itinerary.cost_comments.html_safe

  - if itinerary.missing_information
    %h4
      %i.icon.icon-question-sign
      =translate_helper_translate(:this_service_is_for)
      %ul
        -itinerary.missing_information_text.splitranslate_helper_translate(':').each do |info|
          %li
            -count = 0
            -info.splitranslate_helper_translate(',').each do |i|
              - count += 1
              - if info.splitranslate_helper_translate(',').count - 1 == count
                -if i[0,7] == "age_max" or i[0,7] == "age_min"
                  = translate_helper_translate(i[0,7], age: i[7..-1]) + ' ' + translate_helper_translate(:and) + ' '
                -else
                  = translate_helper_translate(i) + ' ' + translate_helper_translate(:and) + ' '
              - elsif info.splitranslate_helper_translate(',').count == count
                -if i[0,7] == "age_max" or i[0,7] == "age_min"
                  = translate_helper_translate(i[0,7], age: i[7..-1])
                -else
                  = translate_helper_translate(i)
              - else
                -if i[0,7] == "age_max" or i[0,7] == "age_min"
                  = translate_helper_translate(i[0,7], age: i[7..-1]) + ','
                -else
                  = translate_helper_translate(i) + ','

  -if itinerary.accommodation_mismatch
    %h4
      %i.icon.icon-warning-sign
      = translate_helper_translate(:trip_needs_more_accommodations).to_s + ":"
    %ul
      -itinerary.missing_accommodations.splitranslate_helper_translate(',').each do |accommodation|
        %li
          =accommodation
  -if itinerary.too_late
    %h4
      %i.icon.icon-calendar
      = translate_helper_translate(:trip_insufficient_notice_a) + itinerary.service.human_readable_advanced_notice + translate_helper_translate(:trip_insufficient_notice_b)
  -if itinerary.too_early
    %h4
      %i.icon.icon-calendar
      = translate_helper_translate(:trip_max_advanced_book_notice_a) + itinerary.service.human_readable_max_allow_advanced_notice + translate_helper_translate(:trip_max_advanced_book_notice_b)
  -if itinerary.date_mismatch or itinerary.time_mismatch
    %h4
      %i.icon.icon-calendar
      = translate_helper_translate(:trip_outside_service_hours)

  %h4
    - if itinerary.service.try(:phone).present?
      = raw "Please call #{tel_link itinerary.service.phone} "
    - if itinerary.service.try(:email).present? && itinerary.service.try(:phone).present?
      = raw "or email #{itinerary.service.try(:email)} "
    - elsif itinerary.service.try(:email).present?
      = raw "Please email #{itinerary.service.try(:email)} "
    - if itinerary.service.try(:email).present? || itinerary.service.try(:phone).present?
      for more information.

  .row-fluid.hidden= "SCORE: " + itinerary.match_score.to_s
